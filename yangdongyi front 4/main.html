<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>양동이 챗봇 메인 페이지</title>
<style>
  :root{
    --brand:#1565d8; --brand-dark:#0f4aa4;
    --bg:#f3f6fb; --card:#ffffff;
    --text:#1f2a37; --muted:#6b7280;
    --shadow:0 8px 24px rgba(0,0,0,.06);
    --sbw:260px;
    --assist-shift: 120px;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--text);
    font-family:"Pretendard","Noto Sans KR",system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,"Malgun Gothic",sans-serif;
  }

  /* ===== Sidebar ===== */
  .sidebar{
    position:fixed; inset:0 auto 0 0; width:var(--sbw); height:100vh;
    background:linear-gradient(180deg,var(--brand),var(--brand-dark));
    color:#fff; display:flex; flex-direction:column; padding:18px 14px;
    transition:transform .25s ease; z-index:50;
  }
  body.sidebar-closed .sidebar{ transform:translateX(-100%); }

  .sb-top{display:flex; align-items:center; gap:10px; padding:8px 10px 14px 8px; border-bottom:1px solid rgba(255,255,255,.18); margin-bottom:12px;}
  .logo{display:flex; align-items:center; gap:10px; font-weight:700; font-size:18px;}
  .logo img{width:28px; height:28px; border-radius:50%; background:#fff}
  .sb-links{display:flex; flex-direction:column; gap:6px; padding:10px 0}
  .sb-item{
    display:flex; align-items:center; gap:10px; padding:12px; border-radius:10px;
    color:#eaf2ff; text-decoration:none; cursor:pointer; transition:background .18s ease;
  }
  .sb-item .icon{width:22px; height:22px; display:grid; place-items:center; background:rgba(255,255,255,.18); border-radius:8px; font-size:13px}
  .sb-item:hover{background:rgba(255,255,255,.14)}
  .sb-item.active{background:#fff; color:var(--brand)}
  .sb-bottom{margin-top:auto; display:flex; align-items:center; gap:10px; padding:10px 12px; opacity:.9}
  .sb-bottom img{width:44px; height:44px; border-radius:50%; background:#fff}
  .sb-bottom .role{font-size:12px; opacity:.9}

  /* ===== Main ===== */
  .main{
    min-height:100vh; display:flex; flex-direction:column;
    margin-left:var(--sbw); transition:margin-left .25s ease;
  }
  body.sidebar-closed .main{ margin-left:0; }

  .topbar{
    height:64px; background:#fff; box-shadow:var(--shadow);
    padding:0 16px; display:flex; align-items:center; gap:8px; justify-content:space-between;
  }
  .auth-btn{ padding:6px 12px; border:none; border-radius:8px; cursor:pointer; background:#1565d8; color:#fff; font-weight:600; transition:background .2s ease;}
  .auth-btn:hover{ background:#0f4aa4; }
  .left-group{display:flex; align-items:center; gap:8px;}
  .sb-toggle{
    border:none; background:transparent; width:40px; height:40px; border-radius:10px;
    font-size:18px; cursor:pointer; display:grid; place-items:center; color:#1f2a37;
  }
  .sb-toggle:hover{background:#eef3ff}
  .topbar .title{font-weight:700; font-size:18px}
  .right{display:flex; align-items:center; gap:12px; color:var(--muted)}

  .content{flex:1; padding:50px; position:relative;}
  .board{height:100%; display:grid; place-items:center;}
  .panel{
    width:min(1200px, 92%); margin: 40px auto 200px;
    background:#f7faff; border-radius:24px;
    box-shadow:inset 0 10px 18px rgba(0,0,0,.03), 0 18px 40px rgba(23,57,132,.08);
    padding:38px 36px;
  }
  .tiles{display:grid; grid-template-columns:repeat(3,1fr); gap:18px;}
  .tile{
    background:#f9fbff; border-radius:18px; padding:50px; box-shadow:0 3px 0 #e3ecff inset, var(--shadow);
    display:flex; gap:14px; align-items:center; cursor:pointer; transition:transform .12s ease, box-shadow .12s ease;
  }
  .tile:hover{transform:translateY(-2px); box-shadow:0 10px 28px rgba(0,0,0,.08)}
  .tile .ic{width:56px; height:56px; border-radius:14px; display:grid; place-items:center; background:#e9f1ff; font-size:22px;}
  .tile .txt .k{font-weight:750}
  .tile .txt .s{font-size:13px; color:var(--muted); margin-top:2px}

  /* 🔗 타일을 링크로 쓸 때 스타일 유지 */
  a.tile{ display:flex; text-decoration:none; color:inherit; }

  /* ===== Assistant (양동이 + 채팅바) ===== */
  .assistant-wrap{
    position: fixed; bottom: 100px;
    left: calc(var(--sbw) + (100vw - var(--sbw)) / 2 - var(--assist-shift));
    transform: translateX(-50%); display:flex; align-items:flex-end; gap:0; z-index:40;
  }
  body.sidebar-closed .assistant-wrap{ left: calc(50% - var(--assist-shift)); transform: translateX(-50%); }
  .yang-stand{ width:400px; height:400px; object-fit:contain; filter:drop-shadow(0 12px 18px rgba(0,0,0,.22)); pointer-events:none; position:relative; top:100px; }
  .assistant-bar{ position:relative; height:64px; display:grid; grid-template-columns:120px 1fr 100px; align-items:center; gap:12px; background:#3c4250; color:#fff; border-radius:28px; padding:10px 12px; box-shadow:0 14px 30px rgba(0,0,0,.24); margin-left:-100px; width:min(860px, calc((100vw - var(--sbw)) - 300px - 70px)); transition:width .25s ease, margin-left .2s ease; }
  .assistant-bar::after{ content:""; position:absolute; left:-10px; bottom:30px; width:18px; height:18px; background:#3c4250; transform:rotate(45deg); border-radius:3px; box-shadow:0 6px 12px rgba(0,0,0,.18); }
  body.sidebar-closed .assistant-bar{ width:min(960px, calc(100vw - 300px - 70px)); }
  .chip-icon{ width:40px; height:40px; border:none; border-radius:10px; background:rgba(255,255,255,.12); color:#fff; cursor:pointer; margin-right:6px; }
  .bar-left{display:flex; align-items:center}
  .bar-center input{ width:100%; height:44px; border:none; outline:none; background:rgba(255,255,255,.12); color:#fff; border-radius:12px; padding:0 12px; font-size:14px; }
  .mic, .send{ width:44px; height:44px; border:none; border-radius:12px; cursor:pointer; }
  .mic{ background:rgba(255,255,255,.12); color:#fff; margin-right:6px; }
  .send{ background:#00a2ff; color:#fff; font-weight:800; }

  @media (max-width:1100px){
    .tiles{grid-template-columns:repeat(2,1fr)}
    .assistant-wrap{ bottom:110px; }
    .assistant-bar{ grid-template-columns:100px 1fr 88px; }
  }
  @media (max-width: 760px){
    .yang-stand{ display:none; }
    .assistant-wrap{ left:50%; bottom:90px; transform:translateX(-50%); }
    .assistant-bar{ margin-left:0; width:min(92vw, 760px); grid-template-columns:90px 1fr 90px; }
  }

  /* Twemoji 크기 조정 */
  .sb-item .icon img.emoji{ width:16px; height:16px; display:block; }
  .tile .ic img.emoji{ width:28px; height:28px; display:block; }
  .chip-icon img.emoji, .mic img.emoji{ width:20px; height:20px; display:block; margin:0 auto; }
</style>
</head>
<body>
  <!-- Sidebar -->
  <aside class="sidebar" id="sidebar">
    <div class="sb-top">
      <div class="logo"><img src="image/yangdongi.png" alt="양동이"><span>양동이</span></div>
    </div>
    <nav class="sb-links">
      <a class="sb-item active" href="#"><span class="icon">🏠</span><span>오늘</span></a>
      <a class="sb-item" href="#"><span class="icon">📅</span><span>지난 7일</span></a>
      <a class="sb-item" href="#"><span class="icon">👤</span><span>개인 정보</span></a>
      <a class="sb-item" href="#"><span class="icon">🎓</span><span>학사 일정</span></a>
      <a class="sb-item" href="#"><span class="icon">📚</span><span>도서관</span></a>
      <a class="sb-item" href="#"><span class="icon">⚙️</span><span>설정</span></a>
    </nav>
    <div class="sb-bottom">
      <img src="image/user.png" alt="사용자">
      <div class="info"><div><strong>홍길동</strong></div><div class="role">학생 · AI소프트웨어</div></div>
    </div>
  </aside>

  <!-- Main -->
  <main class="main">
    <header class="topbar">
      <div class="left-group">
        <button class="sb-toggle" id="toggleBtn">☰</button>
        <div class="title">양동이 챗봇 1.0 </div>
      </div>
      <div class="right"><span class="muted" id="todayText"></span><button id="authBtn" class="auth-btn"></button></div>
    </header>

    <section class="content">
      <div class="board">
        <div class="panel">
          <div class="tiles">
            <!-- 🔗 타일을 링크로 변경 -->
            <a href="feature.html?feature=schedule" class="tile">
              <div class="ic">🗓️</div>
              <div class="txt"><div class="k">수업 시간표</div><div class="s">이번 주 수업 및 강의실</div></div>
            </a>
            <a href="feature.html?feature=cert" class="tile">
              <div class="ic">🧾</div>
              <div class="txt"><div class="k">자격증 안내</div><div class="s">추천 자격증/시험일정</div></div>
            </a>
            <a href="feature.html?feature=grades" class="tile">
              <div class="ic">🧑‍🎓</div>
              <div class="txt"><div class="k">학점 조회</div><div class="s">누적/학기별 성적</div></div>
            </a>
            <a href="feature.html?feature=eclass" class="tile">
              <div class="ic">💻</div>
              <div class="txt"><div class="k">eClass</div><div class="s">과제/공지 바로가기</div></div>
            </a>
            <a href="feature.html?feature=library" class="tile">
              <div class="ic">📚</div>
              <div class="txt"><div class="k">도서관</div><div class="s">대출/연장/좌석 현황</div></div>
            </a>
            <a href="feature.html?feature=graduate" class="tile">
              <div class="ic">🎓</div>
              <div class="txt"><div class="k">졸업 학점 이수</div><div class="s">전공/교양 이수체크</div></div>
            </a>
          </div>
        </div>
      </div>

      <!-- 아래에 있던 6개 링크 타일은 삭제했습니다 -->

      <!-- Assistant -->
      <div class="assistant-wrap">
        <img class="yang-stand" src="image/yangdongi.png" alt="양동이">
        <div class="assistant-bar">
          <div class="bar-left">
            <button class="chip-icon">🌐</button>
            <button class="chip-icon">📘</button>
            <button class="chip-icon">⚙️</button>
          </div>
          <div class="bar-center"><input id="ask" type="text" placeholder="안녕! 난 양동이야. 어떤 점이 궁금해?" /></div>
          <div class="bar-right" style="display:flex;align-items:center;gap:6px;">
            <button class="mic">🎙</button>
            <button class="send" onclick="send()">➜</button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Twemoji -->
  <script src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js" crossorigin="anonymous"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function(){
      twemoji.parse(document.body, { folder:'svg', ext:'.svg' });
    });

    // 오늘 날짜
    (function(){
      const el=document.getElementById('todayText');
      const d=new Date(); const w=['일','월','화','수','목','금','토'][d.getDay()];
      el.textContent=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')} ${w}`;
    })();

    // Sidebar toggle
    document.getElementById('toggleBtn').addEventListener('click',()=>{
      document.body.classList.toggle('sidebar-closed');
    });

    function send(){
      const v=document.getElementById('ask').value.trim();
      if(!v) return;
      console.log('[ASK]',v);
      document.getElementById('ask').value='';
    }

    // 로그인/로그아웃 버튼 상태
    document.addEventListener("DOMContentLoaded", ()=>{
      const btn = document.getElementById("authBtn");
      const loggedIn = localStorage.getItem("isLoggedIn") === "true";
      if(loggedIn){
        btn.textContent = "로그아웃";
        btn.onclick = ()=>{ localStorage.removeItem("isLoggedIn"); location.href="login.html"; };
      } else {
        btn.textContent = "로그인";
        btn.onclick = ()=>{ location.href="login.html"; };
      }
    });
  </script>
</body>
</html>
